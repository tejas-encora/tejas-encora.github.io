import"./IOTextField-fo7zAxId.js";import{u as r,t as T,z as _,e as t,x as p,y as he,b as pe,d as be,w as ge,o as fe}from"./vue.esm-bundler-CdyOBFpo.js";import{_ as ve}from"./_plugin-vue_export-helper-x3n3nnut.js";import{a as ye,s as Te,t as Ve,v as Se,c as xe,d as Ie,f as De,u as we,w as _e,p as Oe,g as Pe,x as ke,i as Be,j as Re,k as Fe,y as Ge,l as Ee,n as O,o as P,q as k,z as ze,A as Ce,r as Ne}from"./VDataTable-Kzopx_Ds.js";import{p as Ue,g as He,a as je,u as Ae,c as V}from"./index-3WNw8ckj.js";const Le=Ue({...ye(),...Te(),...Ve(),...Se()},"VDataTableVirtual"),qe=He()({name:"VDataTableVirtual",props:Le(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,c){let{attrs:b,slots:a}=c;const{groupBy:d}=xe(e),{sortBy:o,multiSort:g,mustSort:f}=Ie(e),{columns:i,headers:z,sortFunctions:C,filterFunctions:N}=De(e,{groupBy:d,showSelect:r(e,"showSelect"),showExpand:r(e,"showExpand")}),{items:U}=we(e,i),x=r(e,"search"),{filteredItems:H}=_e(e,U,x,{transform:l=>l.columns,customKeyFilter:N}),{toggleSort:j}=Oe({sortBy:o,multiSort:g,mustSort:f}),{sortByWithGroups:A,opened:L,extractRows:q,isGroupOpen:K,toggleGroup:M}=Pe({groupBy:d,sortBy:o}),{sortedItems:W}=ke(e,H,A,C),{flatItems:v}=Be(W,d,L),m=T(()=>q(v.value)),{isSelected:J,select:Q,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=Re(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Fe(e),{containerRef:te,markerRef:se,paddingTop:le,paddingBottom:re,computedItems:oe,handleItemResize:ne,handleScroll:de,handleScrollend:ue}=Ge(e,v),ce=T(()=>oe.value.map(l=>l.raw));Ee({sortBy:o,page:_(1),itemsPerPage:_(-1),groupBy:d,search:x}),je({VDataTableRows:{hideNoData:r(e,"hideNoData"),noDataText:r(e,"noDataText"),loading:r(e,"loading"),loadingText:r(e,"loadingText")}});const h=T(()=>({sortBy:o.value,toggleSort:j,someSelected:Z.value,allSelected:$.value,isSelected:J,select:Q,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:K,toggleGroup:M,items:m.value.map(l=>l.raw),internalItems:m.value,groupedItems:v.value,columns:i.value,headers:z.value}));Ae(()=>{const l=O.filterProps(e),ie=P.filterProps(e),me=k.filterProps(e);return t(k,p({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,h.value)},wrapper:()=>{var s,I;return t("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:V(e.height)}},[t("table",null,[t("thead",null,[t(O,p(l,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:se,style:{height:V(le.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(s=a["body.prepend"])==null?void 0:s.call(a,h.value),t(P,p(b,ie,{items:ce.value}),{...a,item:n=>t(ze,{key:n.internalItem.index,renderless:!0,"onUpdate:height":y=>ne(n.internalItem.index,y)},{default:y=>{var w;let{itemRef:D}=y;return((w=a.item)==null?void 0:w.call(a,{...n,itemRef:D}))??t(Ce,p(n.props,{ref:D,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(I=a["body.append"])==null?void 0:I.call(a,h.value),t("tr",{style:{height:V(re.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,h.value)}})})}}),G={name:"IODataTableV",components:["IOTextField"],props:{items:{type:Array,default:()=>[]},hasSearch:{type:Boolean,default:!1}},computed:{isSearch(){return this.hasSearch}},setup(){return{search:he("")}}};function Ke(e,c,b,a,d,o){const g=pe("IOTextField");return fe(),be(Ne,{border:"","max-width":"80%",class:"mx-auto",hasSearch:o.isSearch},{default:ge(()=>[t(g,{modelValue:a.search,"onUpdate:modelValue":c[0]||(c[0]=f=>a.search=f),label:"Search",class:"full-width","leading-icon":"",icon:"magnifying-glass",clear:""},null,8,["modelValue"]),t(qe,{headers:e.headers,items:b.items,height:"400",class:"zebra","item-value":"name"},null,8,["headers","items"])]),_:1},8,["hasSearch"])}const S=ve(G,[["render",Ke]]);G.__docgenInfo={displayName:"IODataTableV",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"hasSearch",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/tmonteverdi/Sites/localhost/IO-Component-Library/src/labs/DataTable/IODataTableV.vue"]};const E="<IODataTableV :hasSearch=args.hasSearch />",Me={title:"UI/Labs/DataTables/Virtual",component:S,render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E}),args:{hasSearch:!1},argTypes:{hasSearch:{controls:{type:"boolean"},description:"Show search"}}},u={render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E})};var B,R,F;u.parameters={...u.parameters,docs:{...(B=u.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: args => ({
    components: {
      IODataTableV
    },
    setup() {
      return {
        args
      };
    },
    template
  })
}`,...(F=(R=u.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};const We=["Default"],$e=Object.freeze(Object.defineProperty({__proto__:null,Default:u,__namedExportsOrder:We,default:Me},Symbol.toStringTag,{value:"Module"}));export{$e as D};
