import"./IOTextField-65c224db.js";import{t as r,u as T,v as w,g as t,x as p,y as he,b as pe,d as be,w as ge,o as fe}from"./vue.esm-bundler-3f0ef50f.js";import{_ as ve}from"./_plugin-vue_export-helper-c27b6911.js";import{m as ye,a as Te,b as Ve,c as Se,d as Ie,e as xe,f as De,u as _e,g as we,p as Oe,h as Pe,i as ke,j as Be,k as Re,l as Fe,n as Ge,o as Ee,V as O,q as P,r as k,s as Ce,t as Ne,v as Ue}from"./VDataTable-3462c4f8.js";import{p as He,g as je,a as ze,u as Ae,c as V}from"./index-a1e9fd4c.js";const Le=He({...ye(),...Te(),...Ve(),...Se()},"VDataTableVirtual"),qe=je()({name:"VDataTableVirtual",props:Le(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,c){let{attrs:b,slots:a}=c;const{groupBy:d}=Ie(e),{sortBy:o,multiSort:g,mustSort:f}=xe(e),{columns:i,headers:C,sortFunctions:N,filterFunctions:U}=De(e,{groupBy:d,showSelect:r(e,"showSelect"),showExpand:r(e,"showExpand")}),{items:H}=_e(e,i),I=r(e,"search"),{filteredItems:j}=we(e,H,I,{transform:l=>l.columns,customKeyFilter:U}),{toggleSort:z}=Oe({sortBy:o,multiSort:g,mustSort:f}),{sortByWithGroups:A,opened:L,extractRows:q,isGroupOpen:K,toggleGroup:M}=Pe({groupBy:d,sortBy:o}),{sortedItems:W}=ke(e,j,A,N),{flatItems:v}=Be(W,d,L),m=T(()=>q(v.value)),{isSelected:J,select:Q,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=Re(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Fe(e),{containerRef:te,markerRef:se,paddingTop:le,paddingBottom:re,computedItems:oe,handleItemResize:ne,handleScroll:de,handleScrollend:ue}=Ge(e,v),ce=T(()=>oe.value.map(l=>l.raw));Ee({sortBy:o,page:w(1),itemsPerPage:w(-1),groupBy:d,search:I}),ze({VDataTableRows:{hideNoData:r(e,"hideNoData"),noDataText:r(e,"noDataText"),loading:r(e,"loading"),loadingText:r(e,"loadingText")}});const h=T(()=>({sortBy:o.value,toggleSort:z,someSelected:Z.value,allSelected:$.value,isSelected:J,select:Q,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:K,toggleGroup:M,items:m.value.map(l=>l.raw),internalItems:m.value,groupedItems:v.value,columns:i.value,headers:C.value}));Ae(()=>{const l=O.filterProps(e),ie=P.filterProps(e),me=k.filterProps(e);return t(k,p({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,h.value)},wrapper:()=>{var s,x;return t("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:V(e.height)}},[t("table",null,[t("thead",null,[t(O,p(l,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:se,style:{height:V(le.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(s=a["body.prepend"])==null?void 0:s.call(a,h.value),t(P,p(b,ie,{items:ce.value}),{...a,item:n=>t(Ce,{key:n.internalItem.index,renderless:!0,"onUpdate:height":y=>ne(n.internalItem.index,y)},{default:y=>{var _;let{itemRef:D}=y;return((_=a.item)==null?void 0:_.call(a,{...n,itemRef:D}))??t(Ne,p(n.props,{ref:D,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(x=a["body.append"])==null?void 0:x.call(a,h.value),t("tr",{style:{height:V(re.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,h.value)}})})}});const G={name:"IODataTableV",components:["IOTextField"],props:{items:{type:Array,default:()=>[]},hasSearch:{type:Boolean,default:!1}},computed:{isSearch(){return this.hasSearch}},setup(){return{search:he("")}}};function Ke(e,c,b,a,d,o){const g=pe("IOTextField");return fe(),be(Ue,{border:"","max-width":"80%",class:"mx-auto",hasSearch:o.isSearch},{default:ge(()=>[t(g,{modelValue:a.search,"onUpdate:modelValue":c[0]||(c[0]=f=>a.search=f),label:"Search",class:"full-width","leading-icon":"",icon:"magnifying-glass",clear:""},null,8,["modelValue"]),t(qe,{headers:e.headers,items:b.items,height:"400",class:"zebra","item-value":"name"},null,8,["headers","items"])]),_:1},8,["hasSearch"])}const S=ve(G,[["render",Ke]]);G.__docgenInfo={displayName:"IODataTableV",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"hasSearch",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/tmonteverdi/Sites/localhost/IO-Component-Library/src/labs/DataTable/IODataTableV.vue"]};const E="<IODataTableV :hasSearch=args.hasSearch />",Me={title:"UI/Labs/DataTables/Virtual",component:S,render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E}),args:{hasSearch:!1},argTypes:{hasSearch:{controls:{type:"boolean"},description:"Show search"}}},u={render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E})};var B,R,F;u.parameters={...u.parameters,docs:{...(B=u.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: args => ({
    components: {
      IODataTableV
    },
    setup() {
      return {
        args
      };
    },
    template
  })
}`,...(F=(R=u.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};const We=["Default"],$e=Object.freeze(Object.defineProperty({__proto__:null,Default:u,__namedExportsOrder:We,default:Me},Symbol.toStringTag,{value:"Module"}));export{$e as D};
//# sourceMappingURL=datatablev.stories-aa181d3e.js.map
