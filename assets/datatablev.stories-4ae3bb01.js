import"./IOTextField-f65317bf.js";import{z as o,A as f,B as k,g as t,C as h,b as pe,d as he,w as ge,o as be}from"./vue.esm-bundler-abcb067d.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import{m as ve,b as fe,c as Se,d as Te,e as Ve,f as Ie,g as De,u as xe,h as _e,p as ke,i as we,j as Be,k as Oe,l as Pe,n as Re,o as Fe,q as Ge,r as w,s as B,t as O,v as Ce,w as Ee,V as He}from"./VDataTable-f8ff387d.js";import{p as Ne,g as Ue,a as ze,u as $e,c as S}from"./index-6b9c8506.js";const je=Ne({...ve(),...fe(),...Se(),...Te()},"VDataTableVirtual"),Ae=Ue()({name:"VDataTableVirtual",props:je(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,r){let{attrs:V,slots:a}=r;const{groupBy:d}=Ve(e),{sortBy:l,multiSort:g,mustSort:b}=Ie(e),{columns:u,headers:E,sortFunctions:H,filterFunctions:N}=De(e,{groupBy:d,showSelect:o(e,"showSelect"),showExpand:o(e,"showExpand")}),{items:U}=xe(e,u),I=o(e,"search"),{filteredItems:z}=_e(e,U,I,{transform:n=>n.columns,customKeyFilter:N}),{toggleSort:$}=ke({sortBy:l,multiSort:g,mustSort:b}),{sortByWithGroups:j,opened:A,extractRows:L,isGroupOpen:W,toggleGroup:M}=we({groupBy:d,sortBy:l}),{sortedItems:q}=Be(e,z,j,H),{flatItems:y}=Oe(q,d,A),m=f(()=>L(y.value)),{isSelected:K,select:Y,selectAll:J,toggleSelect:Q,someSelected:X,allSelected:Z}=Pe(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Re(e),{containerRef:te,markerRef:re,paddingTop:se,paddingBottom:le,computedItems:ne,handleItemResize:oe,handleScroll:de,handleScrollend:ie}=Fe(e,y),ce=f(()=>ne.value.map(n=>n.raw));Ge({sortBy:l,page:k(1),itemsPerPage:k(-1),groupBy:d,search:I}),ze({VDataTableRows:{hideNoData:o(e,"hideNoData"),noDataText:o(e,"noDataText"),loading:o(e,"loading"),loadingText:o(e,"loadingText")}});const p=f(()=>({sortBy:l.value,toggleSort:$,someSelected:X.value,allSelected:Z.value,isSelected:K,select:Y,selectAll:J,toggleSelect:Q,isExpanded:ee,toggleExpand:ae,isGroupOpen:W,toggleGroup:M,items:m.value.map(n=>n.raw),internalItems:m.value,groupedItems:y.value,columns:u.value,headers:E.value}));$e(()=>{const n=w.filterProps(e),ue=B.filterProps(e),me=O.filterProps(e);return t(O,h({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,p.value)},wrapper:()=>{var s,D;return t("div",{ref:te,onScrollPassive:de,onScrollend:ie,class:"v-table__wrapper",style:{height:S(e.height)}},[t("table",null,[t("thead",null,[t(w,h(n,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:re,style:{height:S(se.value),border:0}},[t("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),(s=a["body.prepend"])==null?void 0:s.call(a,p.value),t(B,h(V,ue,{items:ce.value}),{...a,item:i=>t(Ce,{key:i.internalItem.index,renderless:!0,"onUpdate:height":v=>oe(i.internalItem.index,v)},{default:v=>{var _;let{itemRef:x}=v;return((_=a.item)==null?void 0:_.call(a,{...i,itemRef:x}))??t(Ee,h(i.props,{ref:x,key:i.internalItem.index,index:i.internalItem.index}),a)}})}),(D=a["body.append"])==null?void 0:D.call(a,p.value),t("tr",{style:{height:S(le.value),border:0}},[t("td",{colspan:u.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,p.value)}})})}});const G={name:"IODataTableV",components:["IOTextField"],hasSearch:{type:Boolean,default:!1},data(){return{headers:[{title:"Boat Type",align:"start",key:"name"},{title:"Speed (knots)",align:"end",key:"speed"},{title:"Length (m)",align:"end",key:"length"},{title:"Price ($)",align:"end",key:"price"},{title:"Year",align:"end",key:"year"}],boats:[{name:"Speedster",speed:35,length:22,price:3e5,year:2021},{name:"OceanMaster",speed:25,length:35,price:5e5,year:2020},{name:"Voyager",speed:20,length:45,price:7e5,year:2019},{name:"WaveRunner",speed:40,length:19,price:25e4,year:2022},{name:"SeaBreeze",speed:28,length:31,price:45e4,year:2018},{name:"HarborGuard",speed:18,length:50,price:8e5,year:2017},{name:"SlickFin",speed:33,length:24,price:35e4,year:2021},{name:"StormBreaker",speed:22,length:38,price:6e5,year:2020},{name:"WindSail",speed:15,length:55,price:9e5,year:2019},{name:"FastTide",speed:37,length:20,price:28e4,year:2022}]}},computed:{virtualBoats(){return[...Array(1e4).keys()].map(e=>{const r={...this.boats[e%this.boats.length]};return r.name=`${r.name} #${e}`,r})},isSearch(){return this.hasSearch}}};function Le(e,r,V,a,d,l){const g=pe("IOTextField");return be(),he(He,{border:"","max-width":"80%",class:"mx-auto",hasSearch:l.isSearch},{default:ge(()=>[t(g,{modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=b=>e.search=b),label:"Search",class:"full-width","leading-icon":"",icon:"magnifying-glass",clear:""},null,8,["modelValue"]),t(Ae,{headers:d.headers,items:l.virtualBoats,height:"400","item-value":"name"},null,8,["headers","items"])]),_:1},8,["hasSearch"])}const T=ye(G,[["render",Le]]);G.__docgenInfo={displayName:"IODataTableV",exportName:"default",description:"",tags:{},sourceFiles:["/Users/tmonteverdi/Sites/localhost/IO-Component-Library/src/labs/DataTable/IODataTableV.vue"]};const C="<IODataTableV :hasSearch=args.hasSearch />",We={title:"UI/Labs/DataTables/Virtual",component:T,render:e=>({components:{IODataTableV:T},setup(){return{args:e}},template:C}),args:{hasSearch:!1},argTypes:{hasSearch:{controls:{type:"boolean"},description:"Show search"}}},c={render:e=>({components:{IODataTableV:T},setup(){return{args:e}},template:C})};var P,R,F;c.parameters={...c.parameters,docs:{...(P=c.parameters)==null?void 0:P.docs,source:{originalSource:`{
  render: args => ({
    components: {
      IODataTableV
    },
    setup() {
      return {
        args
      };
    },
    template
  })
}`,...(F=(R=c.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};const Me=["Default"],Xe=Object.freeze(Object.defineProperty({__proto__:null,Default:c,__namedExportsOrder:Me,default:We},Symbol.toStringTag,{value:"Module"}));export{Xe as D};
//# sourceMappingURL=datatablev.stories-4ae3bb01.js.map
