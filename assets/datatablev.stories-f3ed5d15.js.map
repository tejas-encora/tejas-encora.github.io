{"version":3,"file":"datatablev.stories-f3ed5d15.js","sources":["../../node_modules/vuetify/lib/components/VDataTable/VDataTableVirtual.mjs","../../src/labs/DataTable/IODataTableV.vue"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective } from \"vue\";\n// Components\nimport { makeDataTableProps } from \"./VDataTable.mjs\";\nimport { VDataTableHeaders } from \"./VDataTableHeaders.mjs\";\nimport { VDataTableRow } from \"./VDataTableRow.mjs\";\nimport { VDataTableRows } from \"./VDataTableRows.mjs\";\nimport { VTable } from \"../VTable/index.mjs\";\nimport { VVirtualScrollItem } from \"../VVirtualScroll/VVirtualScrollItem.mjs\"; // Composables\nimport { provideExpanded } from \"./composables/expand.mjs\";\nimport { createGroupBy, makeDataTableGroupProps, provideGroupBy, useGroupedItems } from \"./composables/group.mjs\";\nimport { createHeaders } from \"./composables/headers.mjs\";\nimport { useDataTableItems } from \"./composables/items.mjs\";\nimport { useOptions } from \"./composables/options.mjs\";\nimport { provideSelection } from \"./composables/select.mjs\";\nimport { createSort, provideSort, useSortedItems } from \"./composables/sort.mjs\";\nimport { provideDefaults } from \"../../composables/defaults.mjs\";\nimport { makeFilterProps, useFilter } from \"../../composables/filter.mjs\";\nimport { makeVirtualProps, useVirtual } from \"../../composables/virtual.mjs\"; // Utilities\nimport { computed, shallowRef, toRef } from 'vue';\nimport { convertToUnit, genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVDataTableVirtualProps = propsFactory({\n  ...makeDataTableProps(),\n  ...makeDataTableGroupProps(),\n  ...makeVirtualProps(),\n  ...makeFilterProps()\n}, 'VDataTableVirtual');\nexport const VDataTableVirtual = genericComponent()({\n  name: 'VDataTableVirtual',\n  props: makeVDataTableVirtualProps(),\n  emits: {\n    'update:modelValue': value => true,\n    'update:sortBy': value => true,\n    'update:options': value => true,\n    'update:groupBy': value => true,\n    'update:expanded': value => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      slots\n    } = _ref;\n    const {\n      groupBy\n    } = createGroupBy(props);\n    const {\n      sortBy,\n      multiSort,\n      mustSort\n    } = createSort(props);\n    const {\n      columns,\n      headers,\n      sortFunctions,\n      filterFunctions\n    } = createHeaders(props, {\n      groupBy,\n      showSelect: toRef(props, 'showSelect'),\n      showExpand: toRef(props, 'showExpand')\n    });\n    const {\n      items\n    } = useDataTableItems(props, columns);\n    const search = toRef(props, 'search');\n    const {\n      filteredItems\n    } = useFilter(props, items, search, {\n      transform: item => item.columns,\n      customKeyFilter: filterFunctions\n    });\n    const {\n      toggleSort\n    } = provideSort({\n      sortBy,\n      multiSort,\n      mustSort\n    });\n    const {\n      sortByWithGroups,\n      opened,\n      extractRows,\n      isGroupOpen,\n      toggleGroup\n    } = provideGroupBy({\n      groupBy,\n      sortBy\n    });\n    const {\n      sortedItems\n    } = useSortedItems(props, filteredItems, sortByWithGroups, sortFunctions);\n    const {\n      flatItems\n    } = useGroupedItems(sortedItems, groupBy, opened);\n    const allItems = computed(() => extractRows(flatItems.value));\n    const {\n      isSelected,\n      select,\n      selectAll,\n      toggleSelect,\n      someSelected,\n      allSelected\n    } = provideSelection(props, {\n      allItems,\n      currentPage: allItems\n    });\n    const {\n      isExpanded,\n      toggleExpand\n    } = provideExpanded(props);\n    const {\n      containerRef,\n      markerRef,\n      paddingTop,\n      paddingBottom,\n      computedItems,\n      handleItemResize,\n      handleScroll,\n      handleScrollend\n    } = useVirtual(props, flatItems);\n    const displayItems = computed(() => computedItems.value.map(item => item.raw));\n    useOptions({\n      sortBy,\n      page: shallowRef(1),\n      itemsPerPage: shallowRef(-1),\n      groupBy,\n      search\n    });\n    provideDefaults({\n      VDataTableRows: {\n        hideNoData: toRef(props, 'hideNoData'),\n        noDataText: toRef(props, 'noDataText'),\n        loading: toRef(props, 'loading'),\n        loadingText: toRef(props, 'loadingText')\n      }\n    });\n    const slotProps = computed(() => ({\n      sortBy: sortBy.value,\n      toggleSort,\n      someSelected: someSelected.value,\n      allSelected: allSelected.value,\n      isSelected,\n      select,\n      selectAll,\n      toggleSelect,\n      isExpanded,\n      toggleExpand,\n      isGroupOpen,\n      toggleGroup,\n      items: allItems.value.map(item => item.raw),\n      internalItems: allItems.value,\n      groupedItems: flatItems.value,\n      columns: columns.value,\n      headers: headers.value\n    }));\n    useRender(() => {\n      const dataTableHeadersProps = VDataTableHeaders.filterProps(props);\n      const dataTableRowsProps = VDataTableRows.filterProps(props);\n      const tableProps = VTable.filterProps(props);\n      return _createVNode(VTable, _mergeProps({\n        \"class\": ['v-data-table', {\n          'v-data-table--loading': props.loading\n        }, props.class],\n        \"style\": props.style\n      }, tableProps), {\n        top: () => slots.top?.(slotProps.value),\n        wrapper: () => _createVNode(\"div\", {\n          \"ref\": containerRef,\n          \"onScrollPassive\": handleScroll,\n          \"onScrollend\": handleScrollend,\n          \"class\": \"v-table__wrapper\",\n          \"style\": {\n            height: convertToUnit(props.height)\n          }\n        }, [_createVNode(\"table\", null, [_createVNode(\"thead\", null, [_createVNode(VDataTableHeaders, _mergeProps(dataTableHeadersProps, {\n          \"sticky\": props.fixedHeader\n        }), slots)]), _createVNode(\"tbody\", null, [_createVNode(\"tr\", {\n          \"ref\": markerRef,\n          \"style\": {\n            height: convertToUnit(paddingTop.value),\n            border: 0\n          }\n        }, [_createVNode(\"td\", {\n          \"colspan\": columns.value.length,\n          \"style\": {\n            height: 0,\n            border: 0\n          }\n        }, null)]), slots['body.prepend']?.(slotProps.value), _createVNode(VDataTableRows, _mergeProps(attrs, dataTableRowsProps, {\n          \"items\": displayItems.value\n        }), {\n          ...slots,\n          item: itemSlotProps => _createVNode(VVirtualScrollItem, {\n            \"key\": itemSlotProps.internalItem.index,\n            \"renderless\": true,\n            \"onUpdate:height\": height => handleItemResize(itemSlotProps.internalItem.index, height)\n          }, {\n            default: _ref2 => {\n              let {\n                itemRef\n              } = _ref2;\n              return slots.item?.({\n                ...itemSlotProps,\n                itemRef\n              }) ?? _createVNode(VDataTableRow, _mergeProps(itemSlotProps.props, {\n                \"ref\": itemRef,\n                \"key\": itemSlotProps.internalItem.index,\n                \"index\": itemSlotProps.internalItem.index\n              }), slots);\n            }\n          })\n        }), slots['body.append']?.(slotProps.value), _createVNode(\"tr\", {\n          \"style\": {\n            height: convertToUnit(paddingBottom.value),\n            border: 0\n          }\n        }, [_createVNode(\"td\", {\n          \"colspan\": columns.value.length,\n          \"style\": {\n            height: 0,\n            border: 0\n          }\n        }, null)])])])]),\n        bottom: () => slots.bottom?.(slotProps.value)\n      });\n    });\n  }\n});\n//# sourceMappingURL=VDataTableVirtual.mjs.map","<template>\n    <v-card border\n            max-width=\"80%\"\n            class=\"mx-auto\"\n            :hasSearch=\"isSearch\">\n        <IOTextField v-model=\"search\"\n                     label=\"Search\"\n                     class=\"full-width\"\n                     leading-icon\n                     icon=\"magnifying-glass\"\n                     clear />\n        <v-data-table-virtual :headers=\"headers\"\n                              :items=\"items\"\n                              height=\"400\"\n                              class=\"zebra\"\n                              item-value=\"name\"></v-data-table-virtual>\n    </v-card>\n</template>\n\n<script>\nimport IOTextField from \"@/components/Inputs/IOTextField.vue\"\nimport { ref } from 'vue'\n\nexport default {\n    name: 'IODataTableV',\n    components: ['IOTextField'],\n    props: {\n        items: {\n            type: Array,\n            default: () => [],\n        },\n        hasSearch: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    computed: {\n        isSearch() {\n            return this.hasSearch;\n        }\n    },\n    setup() {\n        const search = ref('')\n\n        return {\n            search\n        }\n    },\n}\n</script>\n<style>\n.full-width {\n    width: 100%;\n}\n\n.vcard {\n    /* width: 80% !important; */\n    text-align: center !important;\n    border: 1px solid !important;\n}\n\n.zebra tbody tr:nth-child(even) {\n    background-color: var(--md-sys-color-surface-container-low);\n}\n\n.v-data-table-header__content {\n    font-weight: bold;\n}\n\n.v-data-table-header__content,\n.v-data-table__td {\n    font-family: \"Lato\", sans-serif !important;\n}\n\n.v-table .v-icon {\n    font-size: 14px;\n    height: 20px;\n    width: 20px;\n}\n</style>\n"],"names":["makeVDataTableVirtualProps","propsFactory","makeDataTableProps","makeDataTableGroupProps","makeVirtualProps","makeFilterProps","VDataTableVirtual","genericComponent","value","props","_ref","attrs","slots","groupBy","createGroupBy","sortBy","multiSort","mustSort","createSort","columns","headers","sortFunctions","filterFunctions","createHeaders","toRef","items","useDataTableItems","search","filteredItems","useFilter","item","toggleSort","provideSort","sortByWithGroups","opened","extractRows","isGroupOpen","toggleGroup","provideGroupBy","sortedItems","useSortedItems","flatItems","useGroupedItems","allItems","computed","isSelected","select","selectAll","toggleSelect","someSelected","allSelected","provideSelection","isExpanded","toggleExpand","provideExpanded","containerRef","markerRef","paddingTop","paddingBottom","computedItems","handleItemResize","handleScroll","handleScrollend","useVirtual","displayItems","useOptions","shallowRef","provideDefaults","slotProps","useRender","dataTableHeadersProps","VDataTableHeaders","dataTableRowsProps","VDataTableRows","tableProps","VTable","_createVNode","_mergeProps","_a","convertToUnit","itemSlotProps","VVirtualScrollItem","height","_ref2","itemRef","VDataTableRow","_b","_sfc_main","ref","_createBlock","_component_v_card","$options","_component_IOTextField","$setup","$event","_component_v_data_table_virtual","_ctx","$props"],"mappings":"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","x_google_ignoreList":[0]}