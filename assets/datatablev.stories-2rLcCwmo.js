import"./IoTextField-0ezx9CIp.js";import{D as l,x as T,H as _,t,G as h,v as pe,m as he,b as fe,w as be,o as ge}from"./vue.esm-bundler-488J0-Su.js";import{_ as ve}from"./_plugin-vue_export-helper-x3n3nnut.js";import{V as ye}from"./VCard-oeXP2yil.js";import{a as Te,s as Ve,t as Se,c as xe,d as De,f as Ie,u as we,v as _e,p as Oe,g as Pe,w as ke,i as Be,j as Re,k as Fe,l as Ge,o as O,q as P,r as k,x as Ee}from"./VDataTable-mWlZlUfV.js";import{m as Ce,u as He,a as Ne}from"./VSelect-_KZwLNU1.js";import{p as Ue,g as je,a as ze,u as Ae,c as V}from"./index-m0DKv_rT.js";const Le=Ue({...Te(),...Ve(),...Ce(),...Se()},"VDataTableVirtual"),qe=je()({name:"VDataTableVirtual",props:Le(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,c){let{attrs:f,slots:a}=c;const{groupBy:d}=xe(e),{sortBy:o,multiSort:b,mustSort:g}=De(e),{columns:i,headers:C,sortFunctions:H,filterFunctions:N}=Ie(e,{groupBy:d,showSelect:l(e,"showSelect"),showExpand:l(e,"showExpand")}),{items:U}=we(e,i),x=l(e,"search"),{filteredItems:j}=_e(e,U,x,{transform:r=>r.columns,customKeyFilter:N}),{toggleSort:z}=Oe({sortBy:o,multiSort:b,mustSort:g}),{sortByWithGroups:A,opened:L,extractRows:q,isGroupOpen:K,toggleGroup:M}=Pe({groupBy:d,sortBy:o}),{sortedItems:W}=ke(e,j,A,H),{flatItems:v}=Be(W,d,L),m=T(()=>q(v.value)),{isSelected:J,select:Q,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=Re(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Fe(e),{containerRef:te,markerRef:se,paddingTop:re,paddingBottom:le,computedItems:oe,handleItemResize:ne,handleScroll:de,handleScrollend:ue}=He(e,v),ce=T(()=>oe.value.map(r=>r.raw));Ge({sortBy:o,page:_(1),itemsPerPage:_(-1),groupBy:d,search:x}),ze({VDataTableRows:{hideNoData:l(e,"hideNoData"),noDataText:l(e,"noDataText"),loading:l(e,"loading"),loadingText:l(e,"loadingText")}});const p=T(()=>({sortBy:o.value,toggleSort:z,someSelected:Z.value,allSelected:$.value,isSelected:J,select:Q,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:K,toggleGroup:M,items:m.value.map(r=>r.raw),internalItems:m.value,groupedItems:v.value,columns:i.value,headers:C.value}));Ae(()=>{const r=O.filterProps(e),ie=P.filterProps(e),me=k.filterProps(e);return t(k,h({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,p.value)},wrapper:()=>{var s,D;return t("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:V(e.height)}},[t("table",null,[t("thead",null,[t(O,h(r,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:se,style:{height:V(re.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(s=a["body.prepend"])==null?void 0:s.call(a,p.value),t(P,h(f,ie,{items:ce.value}),{...a,item:n=>t(Ne,{key:n.internalItem.index,renderless:!0,"onUpdate:height":y=>ne(n.internalItem.index,y)},{default:y=>{var w;let{itemRef:I}=y;return((w=a.item)==null?void 0:w.call(a,{...n,itemRef:I}))??t(Ee,h(n.props,{ref:I,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(D=a["body.append"])==null?void 0:D.call(a,p.value),t("tr",{style:{height:V(le.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,p.value)}})})}}),G={name:"IODataTableV",components:["IOTextField"],props:{items:{type:Array,default:()=>[]},hasSearch:{type:Boolean,default:!1}},computed:{isSearch(){return this.hasSearch}},setup(){return{search:pe("")}}};function Ke(e,c,f,a,d,o){const b=he("IOTextField");return ge(),fe(ye,{border:"","max-width":"80%",class:"mx-auto",hasSearch:o.isSearch},{default:be(()=>[t(b,{modelValue:a.search,"onUpdate:modelValue":c[0]||(c[0]=g=>a.search=g),label:"Search",class:"full-width","leading-icon":"",icon:"magnifying-glass",clear:""},null,8,["modelValue"]),t(qe,{headers:e.headers,items:f.items,height:"400",class:"zebra","item-value":"name"},null,8,["headers","items"])]),_:1},8,["hasSearch"])}const S=ve(G,[["render",Ke]]);G.__docgenInfo={displayName:"IODataTableV",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"hasSearch",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/tmonteverdi/Sites/localhost/IO-Component-Library/src/labs/DataTable/IODataTableV.vue"]};const E="<IODataTableV :hasSearch=args.hasSearch />",Me={title:"UI/Labs/DataTables/Virtual",component:S,render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E}),args:{hasSearch:!1},argTypes:{hasSearch:{controls:{type:"boolean"},description:"Show search"}}},u={render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:E})};var B,R,F;u.parameters={...u.parameters,docs:{...(B=u.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: args => ({
    components: {
      IODataTableV
    },
    setup() {
      return {
        args
      };
    },
    template
  })
}`,...(F=(R=u.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};const We=["Default"],aa=Object.freeze(Object.defineProperty({__proto__:null,Default:u,__namedExportsOrder:We,default:Me},Symbol.toStringTag,{value:"Module"}));export{aa as D};
