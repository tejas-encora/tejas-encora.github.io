import"./IOTextField-2ggSFc3y.js";import{A as r,q as T,D as _,e as t,C as h,p as pe,b as he,d as be,w as ge,o as fe}from"./vue.esm-bundler-VhMez9An.js";import{_ as ve}from"./_plugin-vue_export-helper-x3n3nnut.js";import{b as ye,t as Te,v as Ve,d as Se,e as De,g as Ie,u as xe,w as we,p as _e,h as Oe,x as Pe,j as ke,k as Be,l as Re,n as Fe,q as O,r as P,s as k,y as Ge,V as Ce}from"./VDataTable-2PMy9x6G.js";import{m as Ee,u as Ne,a as Ue}from"./VSelect-Ht9iIyB3.js";import{p as He,g as je,a as ze,u as Ae,c as V}from"./index-ODqJ3mQr.js";const qe=He({...ye(),...Te(),...Ee(),...Ve()},"VDataTableVirtual"),Le=je()({name:"VDataTableVirtual",props:qe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,c){let{attrs:b,slots:a}=c;const{groupBy:d}=Se(e),{sortBy:o,multiSort:g,mustSort:f}=De(e),{columns:i,headers:E,sortFunctions:N,filterFunctions:U}=Ie(e,{groupBy:d,showSelect:r(e,"showSelect"),showExpand:r(e,"showExpand")}),{items:H}=xe(e,i),D=r(e,"search"),{filteredItems:j}=we(e,H,D,{transform:l=>l.columns,customKeyFilter:U}),{toggleSort:z}=_e({sortBy:o,multiSort:g,mustSort:f}),{sortByWithGroups:A,opened:q,extractRows:L,isGroupOpen:K,toggleGroup:M}=Oe({groupBy:d,sortBy:o}),{sortedItems:W}=Pe(e,j,A,N),{flatItems:v}=ke(W,d,q),m=T(()=>L(v.value)),{isSelected:J,select:Q,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=Be(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Re(e),{containerRef:te,markerRef:se,paddingTop:le,paddingBottom:re,computedItems:oe,handleItemResize:ne,handleScroll:de,handleScrollend:ue}=Ne(e,v),ce=T(()=>oe.value.map(l=>l.raw));Fe({sortBy:o,page:_(1),itemsPerPage:_(-1),groupBy:d,search:D}),ze({VDataTableRows:{hideNoData:r(e,"hideNoData"),noDataText:r(e,"noDataText"),loading:r(e,"loading"),loadingText:r(e,"loadingText")}});const p=T(()=>({sortBy:o.value,toggleSort:z,someSelected:Z.value,allSelected:$.value,isSelected:J,select:Q,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:K,toggleGroup:M,items:m.value.map(l=>l.raw),internalItems:m.value,groupedItems:v.value,columns:i.value,headers:E.value}));Ae(()=>{const l=O.filterProps(e),ie=P.filterProps(e),me=k.filterProps(e);return t(k,h({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,p.value)},wrapper:()=>{var s,I;return t("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:V(e.height)}},[t("table",null,[t("thead",null,[t(O,h(l,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:se,style:{height:V(le.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(s=a["body.prepend"])==null?void 0:s.call(a,p.value),t(P,h(b,ie,{items:ce.value}),{...a,item:n=>t(Ue,{key:n.internalItem.index,renderless:!0,"onUpdate:height":y=>ne(n.internalItem.index,y)},{default:y=>{var w;let{itemRef:x}=y;return((w=a.item)==null?void 0:w.call(a,{...n,itemRef:x}))??t(Ge,h(n.props,{ref:x,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(I=a["body.append"])==null?void 0:I.call(a,p.value),t("tr",{style:{height:V(re.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,p.value)}})})}}),G={name:"IODataTableV",components:["IOTextField"],props:{items:{type:Array,default:()=>[]},hasSearch:{type:Boolean,default:!1}},computed:{isSearch(){return this.hasSearch}},setup(){return{search:pe("")}}};function Ke(e,c,b,a,d,o){const g=he("IOTextField");return fe(),be(Ce,{border:"","max-width":"80%",class:"mx-auto",hasSearch:o.isSearch},{default:ge(()=>[t(g,{modelValue:a.search,"onUpdate:modelValue":c[0]||(c[0]=f=>a.search=f),label:"Search",class:"full-width","leading-icon":"",icon:"magnifying-glass",clear:""},null,8,["modelValue"]),t(Le,{headers:e.headers,items:b.items,height:"400",class:"zebra","item-value":"name"},null,8,["headers","items"])]),_:1},8,["hasSearch"])}const S=ve(G,[["render",Ke]]);G.__docgenInfo={displayName:"IODataTableV",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"hasSearch",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/tmonteverdi/Sites/localhost/IO-Component-Library/src/labs/DataTable/IODataTableV.vue"]};const C="<IODataTableV :hasSearch=args.hasSearch />",Me={title:"UI/Labs/DataTables/Virtual",component:S,render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:C}),args:{hasSearch:!1},argTypes:{hasSearch:{controls:{type:"boolean"},description:"Show search"}}},u={render:e=>({components:{IODataTableV:S},setup(){return{args:e}},template:C})};var B,R,F;u.parameters={...u.parameters,docs:{...(B=u.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: args => ({
    components: {
      IODataTableV
    },
    setup() {
      return {
        args
      };
    },
    template
  })
}`,...(F=(R=u.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};const We=["Default"],ea=Object.freeze(Object.defineProperty({__proto__:null,Default:u,__namedExportsOrder:We,default:Me},Symbol.toStringTag,{value:"Module"}));export{ea as D};
